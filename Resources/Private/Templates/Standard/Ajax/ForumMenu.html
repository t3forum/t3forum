{namespace mmf=Mittwald\Typo3Forum\ViewHelpers}

<ul>
    <f:if condition="{forum.parent}">
        <li>
            <f:link.action controller="Forum" action="show" arguments="{forum: forum.parent}">
                {f:translate(key:'Button_Back')}
            </f:link.action>
        </li>
    </f:if>
    <f:format.htmlentitiesDecode>  
        <mmf:authentication.ifAccess object="{forum}" accessType="newTopic">
        <li>
            <f:link.action controller="Topic" action="new" arguments="{forum: forum}">
                <i class="tx-t3forum-icon-16-topic-new"></i> {f:translate(key:'Button_Topic_New')}
            </f:link.action>
        </li>
        </mmf:authentication.ifAccess>
    </f:format.htmlentitiesDecode>

    <f:format.htmlentitiesDecode>
        <mmf:authentication.ifLoggedIn>
        <li>
        <mmf:user.ifSubscribed object="{forum}">
        <f:then>
            <f:link.action controller="User" action="subscribe" arguments="{forum: forum, unsubscribe: 1}">
                <i class="tx-t3forum-icon-16-unsubscribe"></i> {f:translate(key:'Button_Unsubscribe')}
            </f:link.action>
        </f:then>
        <f:else>
            <f:link.action controller="User" action="subscribe" arguments="{forum: forum}">
               <i class="tx-t3forum-icon-16-subscribe"></i> {f:translate(key:'Button_Subscribe')}
            </f:link.action>
        </f:else>
        </mmf:user.ifSubscribed>
        </li>
        </mmf:authentication.ifLoggedIn>
    </f:format.htmlentitiesDecode>

</ul>
